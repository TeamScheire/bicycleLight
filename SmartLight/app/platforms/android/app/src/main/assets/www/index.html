<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="lib/OnsenUI/css/onsenui.css">
    <link rel="stylesheet" type="text/css" href="lib/OnsenUI/css/onsen-css-components.min.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <title>CME</title>
</head>

<body>
    <ons-navigator id="appNavigator" swipeable swipe-target-width="80px">
        <ons-page>
            <ons-splitter id="appSplitter">
                <ons-splitter-side id="logscreen" page="logs.html" swipeable side="right" collapse="" width="80%"></ons-splitter-side>
                <ons-splitter-content page="tabbar.html"></ons-splitter-content>
            </ons-splitter>
        </ons-page>
    </ons-navigator>

    <template id="tabbar.html">
        <ons-page id="tabbar-page">
            <ons-toolbar>
                <div class="center">home</div>
                <div class="right">
                    <ons-toolbar-button id="btnLogscreen">
                        <ons-icon icon="ion-navicon, material:md-menu"></ons-icon>
                    </ons-toolbar-button>
                </div>
            </ons-toolbar>
            <ons-tabbar swipeable id="appTabbar" position="auto">
                <ons-tab label="home" icon="fa-home" page="home.html" active></ons-tab>
                <ons-tab label="user" icon="fa-user" page="user.html"></ons-tab>
                <ons-tab label="device" icon="fa-bluetooth" page="device.html"></ons-tab>
                <ons-tab label="activity" icon="fa-bicycle" page="activity.html"></ons-tab>
                <ons-tab label="settings" icon="fa-wrench" page="settings.html"></ons-tab>
            </ons-tabbar>

            <script>
                ons.getScriptPage().addEventListener('prechange', function (event) {
                    if (event.target.matches('#appTabbar')) {
                        event.currentTarget.querySelector('ons-toolbar .center').innerHTML = event.tabItem.getAttribute(
                            'label');
                    }
                });

                $('body').on('click', '#btnLogscreen', function (e) {
                    document.getElementById('appSplitter').right.toggle();
                });
                $('body').on('click', 'a', function (e) {
                    e.preventDefault();
                    var page = $(this).attr('data-label');
                    var pageItem = $('#appTabbar [label="' + page + '"]');
                    document.querySelector('#appTabbar').setActiveTab($('ons-tab').index(pageItem));
                });
            </script>
        </ons-page>
    </template>

    <template id="home.html">
        <ons-page>
            <img src="img/becme-banner.png" alt="BeCME" />
            <ons-card>
                <p>Een applicatie voor fietsers met een slim fietslicht om te melden waar de gevaarlijke punten zijn op hun
                    weg.
                </p>
            </ons-card>
            <ons-card>
                <p>Er zijn twee stappen om te starten:</p>
                <ol>
                    <li>Vul je token in bij
                        <a href="#" data-label="user">user</a>
                    </li>
                    <li>Zet je slim fietslicht aan en verbind het met de app via
                        <a href="#" data-label="device">device</a>
                    </li>
                </ol>
            </ons-card>
            <ons-card>
                Veel fietsplezier!
            </ons-card>
            <div style="text-align: center;">
                <img src="img/sponsers.png" alt="imec" />
            </div>
        </ons-page>
    </template>

    <template id="logs.html">
        <ons-page>
            <ons-card>
                <div class="title">Log</div>
                <div id="logs" class="content">

                </div>
            </ons-card>
        </ons-page>
    </template>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="lib/OnsenUI/js/onsenui.min.js"></script>
    <script type="text/javascript" src="lib/jquery/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="lib/moment.min.js"></script>
    <!--<script type="text/javascript" src="lib/paho-mqtt-plugin.js"></script>-->
    <script type="text/javascript" src="lib/browserMqtt.js"></script>
    <script type="text/javascript" src="js/debug.js"></script>
    <script type="text/javascript" src="js/storage.js"></script>
    <script type="text/javascript" src="js/gps.js"></script>
    <script type="text/javascript" src="js/mqttclient.js"></script>
    <script type="text/javascript" src="js/bluetooth.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
</body>

</html>